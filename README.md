# CMS Editor

åŸºæ–¼ React å’Œ TypeScript çš„å¯è¦–åŒ–å…§å®¹ç®¡ç†ç·¨è¼¯å™¨ï¼Œæä¾›ç›´è§€çš„æ‹–æ‹½å¼çµ„ä»¶ç·¨è¼¯é«”é©—ã€‚

## ç‰¹è‰²åŠŸèƒ½

- ğŸ¨ **å¯è¦–åŒ–ç·¨è¼¯** - æ‰€è¦‹å³æ‰€å¾—çš„çµ„ä»¶ç·¨è¼¯ä»‹é¢
- ğŸ“± **éŸ¿æ‡‰å¼é è¦½** - æ”¯æ´æ‰‹æ©Ÿã€å¹³æ¿ã€æ¡Œé¢ä¸‰ç¨®è¦–çª—æ¨¡å¼åˆ‡æ›
- ğŸ§© **çµ„ä»¶åº«** - å…§å»ºæ–‡å­—ã€åœ–ç‰‡ã€å½±ç‰‡ã€é€£çµã€å®¹å™¨ç­‰çµ„ä»¶
- ğŸ¯ **æ‹–æ‹½æ“ä½œ** - ç›´è¦ºçš„æ‹–æ”¾å¼çµ„ä»¶ç®¡ç†
- âš™ï¸ **å³æ™‚ç·¨è¼¯** - å±¬æ€§é¢æ¿å³æ™‚èª¿æ•´çµ„ä»¶æ¨£å¼èˆ‡å…§å®¹

## æŠ€è¡“æ¶æ§‹

### æ ¸å¿ƒæŠ€è¡“

- **React 17** - UI æ¡†æ¶
- **TypeScript** - å‹åˆ¥å®‰å…¨
- **Redux Toolkit** - ç‹€æ…‹ç®¡ç†
- **Vite** - å»ºæ§‹å·¥å…·èˆ‡é–‹ç™¼ä¼ºæœå™¨
- **Styled Components** - CSS-in-JS æ¨£å¼è§£æ±ºæ–¹æ¡ˆ
- **Tailwind CSS** - å·¥å…·é¡æ¨£å¼æ¡†æ¶
- **@dnd-kit** - æ‹–æ‹½åŠŸèƒ½å¯¦ä½œ

### å°ˆæ¡ˆçµæ§‹

```
src/
â”œâ”€â”€ domains/              # åŠŸèƒ½é ˜åŸŸæ¨¡çµ„
â”‚   â”œâ”€â”€ canvas/          # ç•«å¸ƒå€åŸŸ
â”‚   â”œâ”€â”€ editor/          # ç·¨è¼¯å™¨æ ¸å¿ƒé‚è¼¯
â”‚   â”œâ”€â”€ library/         # çµ„ä»¶åº«é¢æ¿
â”‚   â”œâ”€â”€ libs/            # åŸºç¤çµ„ä»¶å®šç¾©
â”‚   â”œâ”€â”€ property/        # å±¬æ€§ç·¨è¼¯é¢æ¿
â”‚   â”œâ”€â”€ renderer/        # çµ„ä»¶æ¸²æŸ“å¼•æ“
â”‚   â””â”€â”€ tree/            # çµ„ä»¶æ¨¹çµæ§‹é¢æ¿
â”œâ”€â”€ shared/              # å…±ç”¨è³‡æº
â”‚   â”œâ”€â”€ components/      # å…±ç”¨ UI çµ„ä»¶
â”‚   â”œâ”€â”€ store/           # Redux Store é…ç½®
â”‚   â””â”€â”€ types/           # TypeScript å‹åˆ¥å®šç¾©
â””â”€â”€ styles/              # å…¨åŸŸæ¨£å¼
```

## å¿«é€Ÿé–‹å§‹

### å®‰è£ä¾è³´

```bash
yarn install
```

### é–‹ç™¼æ¨¡å¼

```bash
yarn dev
```

é–‹ç™¼ä¼ºæœå™¨å°‡åœ¨ `http://localhost:3001` å•Ÿå‹•

### å»ºæ§‹å°ˆæ¡ˆ

```bash
yarn build
```

å»ºæ§‹æµç¨‹åŒ…å«ä¸‰å€‹æ­¥é©Ÿï¼š

1. **TypeScript å‹åˆ¥æª¢æŸ¥** (`tsc`) - ç¢ºä¿ç¨‹å¼ç¢¼å‹åˆ¥æ­£ç¢º
2. **ä¸»æ‡‰ç”¨ç¨‹å¼å»ºæ§‹** (`vite build`) - è¼¸å‡ºç·¨è¼¯å™¨èˆ‡é è¦½é é¢
   - ç·¨è¼¯å™¨ï¼š`index.html` â†’ `dist/index.html`
   - é è¦½é é¢ï¼š`preview.html` â†’ `dist/preview.html`
   - ç”¢ç”Ÿ source maps èˆ‡ manifest æª”æ¡ˆ
3. **ç¨ç«‹æ¸²æŸ“å™¨å»ºæ§‹** (`yarn build:iife`) - ç”¢å‡ºå¯åµŒå…¥çš„ IIFE æ ¼å¼ JS
   - é€²å…¥é»ï¼š`src/domains/renderer/standaloneRenderer.ts`
   - è¼¸å‡ºï¼š`dist/cms-app-renderer.[hash].js`
   - æ ¼å¼ï¼šIIFE (Immediately Invoked Function Expression)
   - ç”¨é€”ï¼šå¯ç¨ç«‹åµŒå…¥ä»»ä½•ç¶²é çš„æ¸²æŸ“å¼•æ“

æ‰€æœ‰å»ºæ§‹ç”¢ç‰©å°‡è¼¸å‡ºè‡³ `dist/` ç›®éŒ„

### é è¦½å»ºæ§‹çµæœ

```bash
yarn preview
```

## é–‹ç™¼æŒ‡ä»¤

```bash
# å‹åˆ¥æª¢æŸ¥
yarn type-check

# ç¨‹å¼ç¢¼æª¢æŸ¥
yarn lint

# è‡ªå‹•ä¿®å¾© ESLint å•é¡Œ
yarn lint:fix

# æ ¼å¼åŒ–ç¨‹å¼ç¢¼
yarn format

# æª¢æŸ¥ç¨‹å¼ç¢¼æ ¼å¼
yarn format:check
```

## æ ¸å¿ƒæ¦‚å¿µ

### çµ„ä»¶ç³»çµ±

ç·¨è¼¯å™¨ä½¿ç”¨ **ComponentFactory** æ¨¡å¼ç®¡ç†çµ„ä»¶è¨»å†Šèˆ‡å¯¦ä¾‹åŒ–ï¼Œæ‰€æœ‰çµ„ä»¶å®šç¾©æ–¼ `src/domains/libs/components/`ã€‚

**æ”¯æ´çš„çµ„ä»¶é¡å‹ï¼š**
- `text` - æ–‡å­—å€å¡Š
- `image` - åœ–ç‰‡
- `video` - å½±ç‰‡
- `link` - è¶…é€£çµ
- `container` - å®¹å™¨ï¼ˆå¯åŒ…å«å­çµ„ä»¶ï¼‰

### ç‹€æ…‹ç®¡ç†

ä½¿ç”¨ Redux Toolkit ç®¡ç†å…¨åŸŸç‹€æ…‹ï¼š

- **çµ„ä»¶æ¨¹çµæ§‹** - å„²å­˜æ‰€æœ‰çµ„ä»¶çš„å±¤ç´šé—œä¿‚
- **é¸ä¸­ç‹€æ…‹** - è¿½è¹¤ç•¶å‰é¸ä¸­çš„çµ„ä»¶
- **è¦–çª—æ¨¡å¼** - è¨˜éŒ„ç•¶å‰é è¦½æ¨¡å¼ï¼ˆmobile/tablet/desktopï¼‰

### è·¯å¾‘åˆ¥å

å°ˆæ¡ˆé…ç½® `@src/*` è·¯å¾‘åˆ¥åï¼Œé¿å…ä½¿ç”¨ç›¸å°è·¯å¾‘ï¼š

```typescript
import { CmsComponent } from '@src/shared/types';
import { useAppDispatch } from '@src/shared/store';
```

## éƒ¨ç½²

å»ºæ§‹å®Œæˆå¾Œï¼Œå°‡ `dist/` ç›®éŒ„éƒ¨ç½²è‡³ä»»ä½•éœæ…‹æª”æ¡ˆä¼ºæœå™¨å³å¯ã€‚

## License

MIT
